=== RUN   TestBroker
2023/03/25 13:27:38 Connected to 1.15.135.178:9700
2023/03/25 13:27:38 authenticated: id=72059483429077040, timeout=5000
2023/03/25 13:27:38 re-submitting `0` credentials after reconnect
2023/03/25 13:27:38 broker 1 elect to controller
2023/03/25 13:27:40 Connected to 1.15.135.178:9700
2023/03/25 13:27:40 authenticated: id=72059483429077041, timeout=5000
2023/03/25 13:27:40 re-submitting `0` credentials after reconnect
panic: test timed out after 10m0s

goroutine 13 [running]:
testing.(*M).startAlarm.func1()
	/opt/software/go/src/testing/testing.go:2029 +0x8e
created by time.goFunc
	/opt/software/go/src/time/sleep.go:176 +0x32

goroutine 1 [chan receive, 10 minutes]:
testing.(*T).Run(0xc000119520, {0x964562?, 0x50ec65?}, 0x9a1f80)
	/opt/software/go/src/testing/testing.go:1487 +0x37a
testing.runTests.func1(0xc0001b0d80?)
	/opt/software/go/src/testing/testing.go:1839 +0x6e
testing.tRunner(0xc000119520, 0xc000197cd8)
	/opt/software/go/src/testing/testing.go:1439 +0x102
testing.runTests(0xc0001c65a0?, {0xd2b9c0, 0x1, 0x1}, {0x7f8761711108?, 0x40?, 0xd3fcc0?})
	/opt/software/go/src/testing/testing.go:1837 +0x457
testing.(*M).Run(0xc0001c65a0)
	/opt/software/go/src/testing/testing.go:1719 +0x5d9
main.main()
	_testmain.go:47 +0x1aa

goroutine 6 [runnable]:
toy-car/server.TestBroker(0xc0001196c0)
	/root/workspace/github.com/toy-car/server/broker_test.go:33 +0xa5
testing.tRunner(0xc0001196c0, 0x9a1f80)
	/opt/software/go/src/testing/testing.go:1439 +0x102
created by testing.(*T).Run
	/opt/software/go/src/testing/testing.go:1486 +0x35f

goroutine 7 [sleep]:
time.Sleep(0x12a05f200)
	/opt/software/go/src/runtime/time.go:194 +0x12e
toy-car/server.TestBroker.func1()
	/root/workspace/github.com/toy-car/server/broker_test.go:26 +0xb4
created by toy-car/server.TestBroker
	/root/workspace/github.com/toy-car/server/broker_test.go:14 +0x5a

goroutine 10 [semacquire, 10 minutes]:
sync.runtime_Semacquire(0xc00000ea50?)
	/opt/software/go/src/runtime/sema.go:56 +0x25
sync.(*WaitGroup).Wait(0xc000139340?)
	/opt/software/go/src/sync/waitgroup.go:136 +0x52
github.com/samuel/go-zookeeper/zk.(*Conn).loop(0xc000139340)
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:536 +0x3af
github.com/samuel/go-zookeeper/zk.Connect.func1()
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:223 +0x25
created by github.com/samuel/go-zookeeper/zk.Connect
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:222 +0x545

goroutine 11 [select]:
github.com/samuel/go-zookeeper/zk.(*Conn).sendLoop(0xc000139340)
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:802 +0x125
github.com/samuel/go-zookeeper/zk.(*Conn).loop.func1()
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:507 +0x5c
created by github.com/samuel/go-zookeeper/zk.(*Conn).loop
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:502 +0x318

goroutine 12 [IO wait]:
internal/poll.runtime_pollWait(0x7f876159b718, 0x72)
	/opt/software/go/src/runtime/netpoll.go:302 +0x89
internal/poll.(*pollDesc).wait(0xc0000a8180?, 0xc000380000?, 0x0)
	/opt/software/go/src/internal/poll/fd_poll_runtime.go:83 +0x32
internal/poll.(*pollDesc).waitRead(...)
	/opt/software/go/src/internal/poll/fd_poll_runtime.go:88
internal/poll.(*FD).Read(0xc0000a8180, {0xc000380000, 0x4, 0x180000})
	/opt/software/go/src/internal/poll/fd_unix.go:167 +0x25a
net.(*netFD).Read(0xc0000a8180, {0xc000380000?, 0xc0000a8180?, 0x40c06d?})
	/opt/software/go/src/net/fd_posix.go:55 +0x29
net.(*conn).Read(0xc000010380, {0xc000380000?, 0xc00005ad68?, 0x40cf76?})
	/opt/software/go/src/net/net.go:183 +0x45
io.ReadAtLeast({0xa26800, 0xc000010380}, {0xc000380000, 0x4, 0x180000}, 0x4)
	/opt/software/go/src/io/io.go:331 +0x9a
io.ReadFull(...)
	/opt/software/go/src/io/io.go:350
github.com/samuel/go-zookeeper/zk.(*Conn).recvLoop(0xc000139340?, {0xa2b840?, 0xc000010380?})
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:843 +0x1ca
github.com/samuel/go-zookeeper/zk.(*Conn).loop.func2()
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:521 +0x67
created by github.com/samuel/go-zookeeper/zk.(*Conn).loop
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:516 +0x385

goroutine 20 [runnable]:
toy-car/server.TestBroker.func2()
	/root/workspace/github.com/toy-car/server/broker_test.go:44 +0xd9
created by toy-car/server.TestBroker
	/root/workspace/github.com/toy-car/server/broker_test.go:33 +0xa5

goroutine 36 [semacquire, 10 minutes]:
sync.runtime_Semacquire(0xc00000e318?)
	/opt/software/go/src/runtime/sema.go:56 +0x25
sync.(*WaitGroup).Wait(0xc000138840?)
	/opt/software/go/src/sync/waitgroup.go:136 +0x52
github.com/samuel/go-zookeeper/zk.(*Conn).loop(0xc000138840)
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:536 +0x3af
github.com/samuel/go-zookeeper/zk.Connect.func1()
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:223 +0x25
created by github.com/samuel/go-zookeeper/zk.Connect
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:222 +0x545

goroutine 23 [select]:
github.com/samuel/go-zookeeper/zk.(*Conn).sendLoop(0xc000138840)
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:802 +0x125
github.com/samuel/go-zookeeper/zk.(*Conn).loop.func1()
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:507 +0x5c
created by github.com/samuel/go-zookeeper/zk.(*Conn).loop
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:502 +0x318

goroutine 24 [IO wait]:
internal/poll.runtime_pollWait(0x7f876159b628, 0x72)
	/opt/software/go/src/runtime/netpoll.go:302 +0x89
internal/poll.(*pollDesc).wait(0xc000598080?, 0xc000780000?, 0x0)
	/opt/software/go/src/internal/poll/fd_poll_runtime.go:83 +0x32
internal/poll.(*pollDesc).waitRead(...)
	/opt/software/go/src/internal/poll/fd_poll_runtime.go:88
internal/poll.(*FD).Read(0xc000598080, {0xc000780000, 0x4, 0x180000})
	/opt/software/go/src/internal/poll/fd_unix.go:167 +0x25a
net.(*netFD).Read(0xc000598080, {0xc000780000?, 0xc000598080?, 0x40c06d?})
	/opt/software/go/src/net/fd_posix.go:55 +0x29
net.(*conn).Read(0xc000518028, {0xc000780000?, 0xc00005cd68?, 0x40cf76?})
	/opt/software/go/src/net/net.go:183 +0x45
io.ReadAtLeast({0xa26800, 0xc000518028}, {0xc000780000, 0x4, 0x180000}, 0x4)
	/opt/software/go/src/io/io.go:331 +0x9a
io.ReadFull(...)
	/opt/software/go/src/io/io.go:350
github.com/samuel/go-zookeeper/zk.(*Conn).recvLoop(0xc000138840?, {0xa2b840?, 0xc000518028?})
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:843 +0x1ca
github.com/samuel/go-zookeeper/zk.(*Conn).loop.func2()
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:521 +0x67
created by github.com/samuel/go-zookeeper/zk.(*Conn).loop
	/opt/workspace/pkg/mod/github.com/samuel/go-zookeeper@v0.0.0-20201211165307-7117e9ea2414/zk/conn.go:516 +0x385

goroutine 25 [chan receive, 9 minutes]:
toy-car/server.(*Broker).watchOnController(0xc00058e000)
	/root/workspace/github.com/toy-car/server/broker.go:171 +0x85
created by toy-car/server.(*Broker).StartUp
	/root/workspace/github.com/toy-car/server/broker.go:206 +0x12f
exit status 2
FAIL	toy-car/server	600.028s
